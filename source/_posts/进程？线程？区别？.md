---
title: 进程？线程？区别？
date: 2019-03-19 10:42:22
tags:
---
### 概念
在这里从计算机发展史的角度来说一下进程和线程，或许更好理解它们和其中的区别。在早期计算机是没有线程这么一说的，进程就是最基本的运行单位，包含静态的资源和动态的计算。随着计算机性能的提升和系统设计的改进，为了避免进程之间的调度带来的开销，同时提升系统的并发性能，于是在进程中引入了线程的概念，专门来负责程序的动态部分。

线程专门来描述系统的动态计算，是系统调度和运行的基本单位，而现在的进程已经是一种静态的概念，可以理解为：为一个或者多个线程提供共享资源的上下文容器，更多强调的是系统的资源，已经不再强调动态特性，这些动态特性已经被转移到线程身上。

所以，归纳一下：
###### 进程：
在一定的环境下，把静态的程序代码运行起来，通过使用不同的资源来完成一定的任务。这些资源可以成为计算机执行的上下文环境。进程是资源分配的单位，强调的是内存资源的管理。宏观上可以看做一个软件的运行。
###### 进程的环境：
环境变量
###### 进程所掌控的资源：
CPU，内存，打开的文件，映射的网络端口等等。

###### 线程
线程是进程的一部分，扮演的角色是在进程已经掌控的资源下怎么利用CPU去运行代码和动态计算。这里牵扯到的是CPU，寄存器和线程的栈。线程是CPU轮流调度的单位，强调的是CPU的运行。宏观上可以看做是一个软件中的多个处理功能。

###### 总结：
一般来说，进程是资源的分配单位，线程是CPU在进程内切换的单位，线程属于进程。

### 举个栗子来说明它们的概念
打开QQ，开了一个进程，打开迅雷，开了一个进程。
在QQ的这个进程里，传输文字开一个线程，传输语音开一个线程，弹出对话框又开了一个线程。
所以运行某个软件，相当于开了一个进程，在软件运行的过程中（在这个进程里面），多个子任务支撑完成QQ的运行，那么这些子任务分别有一个线程。

### 区别？
做个简单的比喻来说明

进程=火车，线程=车厢

1，线程在进程下进行（单纯的车厢无法运行）
2，一个进程可以包含多个线程（一辆火车可以有多个车厢）
3，不同进程间数据共享很难（一辆火车上的乘客很难换到另外一辆火车）
4，统一进程下的不同线程数据很容易共享（A车厢乘客换到B车厢很容易）
5，进程要比线程消耗更多的计算机资源（多列火车相比多个车厢更消耗资源）
6，进程之间不会相互影响，一个线程挂掉将导致整个进程挂掉（点击APP某个功能，APP闪退，但是不影响别的APP使用。或者：一列火车不会影响到另外一列火车，但是如果一列火车上中间的一节车厢着火了，将影响到所有车厢）
7，进程使用的内存地址可以上锁，即一个线城市用某些共享内存时候，其他线程必须等它结束，才能使用这一块内存（火车上的洗手间）
8，进程使用的内存地址可以限定使用量——信号量（比如火车上的餐厅，最多只允许多少人进入，如果满了需要在门口等，等有人出来了才能进去）
9，进程可以拓展到多机，使用多核（不同火车可以开在多个轨道上，但是同一辆火车的车厢不能行使在不同的轨道上）